'Smalltalk-80 of August 28, 1986 (1186 DV6 Stretch)'!'From Smalltalk-80 of 24 November 1986 [ST80V50.im] on 8 June 1987 9:24:45 pm PDT (Monday)'!!Integer methodsFor: 'private'!digitLogic: arg op: op length: len 	| result neg1 neg2 rneg z1 z2 rz b1 b2 b rdigits |	neg1 _ self negative.	neg2 _ arg negative.	rneg _ 		((neg1 ifTrue: [-1] ifFalse: [0])			perform: op 			with: (neg2					ifTrue: [-1]					ifFalse: [0])) < 0.	result _ Integer new: len neg: rneg.	rz _ z1 _ z2 _ true.	rdigits _ 1.	1 to: result digitLength do: 		[:i | 		b1 _ self digitAt: i.		neg1 			ifTrue: [b1 _ z1						ifTrue: [b1 = 0									ifTrue: [0]									ifFalse: 										[z1 _ false.										256 - b1]]						ifFalse: [255 - b1]].		b2 _ arg digitAt: i.		neg2 			ifTrue: [b2 _ z2						ifTrue: [b2 = 0									ifTrue: [0]									ifFalse: 										[z2 _ false.										256 - b2]]						ifFalse: [255 - b2]].		b _ b1 perform: op with: b2.		rneg			ifTrue:				[rz					ifTrue:						[b = 0							ifFalse:								[result digitAt: i put: 256 - b.								rdigits _ i.								rz _ false]]					ifFalse:						[b _ 255 - b.						result digitAt: i put: b.						b = 0 ifFalse: [rdigits _ i]]]			ifFalse:				[result digitAt: i put: b.				b = 0 ifFalse: [rdigits _ i]]].	rdigits ~= len ifTrue: [^(result growto: rdigits) truncated].	^result truncated! !'From The Analyst(tm) on Smalltalk-80 of August 28, 1986 (Dandelion/Daybreak Version 6) on 8 June 1987 at 2:10:05 pm'!!Integer methodsFor: 'arithmetic'!// aNumber 	"Divide the receiver by the argument and return the result.	Round the result down towards negative infinity to make it a whole integer."	| q |	aNumber = 0 ifTrue: [^self error: 'division by 0'].	self = 0 ifTrue: [^0].	q _ self quo: aNumber.	(q < 0		ifTrue: [q * aNumber = self == false]		ifFalse: [q = 0 and: [(self < 0) == (aNumber < 0) == false]])		ifTrue: [^q - 1"Truncate towards minus infinity"]		ifFalse: [^q]! !'From The Analyst(tm) on Smalltalk-80 of August 28, 1986 (Dandelion/Daybreak Version 6) on 6 June 1987 at 9:21:36 pm'!!Text class methodsFor: 'class initialization'!initialize		"Initialize constants shared by classes associated with text display.	Text initialize."	(Smalltalk includes: TextConstants) 		ifFalse: [Smalltalk at: #TextConstants put: (Dictionary new: 32)].	TextConstants at: #CaretForm  		 		 put: (Cursor	extent: 16@16	fromArray: #(		2r110000000		2r110000000		2r1111000000		2r11111100000		2r11001100000		2r0		2r0		2r0		2r0		2r0		2r0		2r0		2r0		2r0		2r0		2r0)	offset: -8@0).	self initTextConstants! !'From Smalltalk-80 of August 28, 1986 (Dandelion/Daybreak Version 6) on 15 June 1987 at 2:40:14 pm'!!SystemDictionary methodsFor: 'time/versions'!copyright	"The Smalltalk copyright:			Copyright (c) 1983, 1984, 1985, 1986, 1987 by Xerox Corporation. All rights reserved."	^'Copyright (c) 1983, 1984, 1985, 1986, 1987 by Xerox Corporation. All rights reserved.'! !"File in bug fixes for integer arithmetic"	(FileStream oldFileNamed: 'Integer-digitLogic-fix.st') fileIn.	(FileStream oldFileNamed: 'Integer-divide-fix.st') fileIn."File in bug fixes for text editing"	(FileStream oldFileNamed: 'TextConstants-initializeCaretForm-fix.st') fileIn."File in the new copyright notice"	(FileStream oldFileNamed: 'SystemDictionary-copyright.st') fileIn.!"Clean up everything"	SystemOrganization removeEmptyCategories.	Smalltalk newClassNames.	Browser allInstancesDo: [:browser | browser updateCategories].	Smalltalk garbageCollect.	Smalltalk noChanges.!'----SNAPSHOT----'